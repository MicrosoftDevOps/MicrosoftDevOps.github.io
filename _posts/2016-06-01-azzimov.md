---
layout: post
title:  "Learnings from a DevOps Hackfest with Azzimov"
author: "Julien Stroheker & William Buchwalter"
author-link: "#"
#author-image: "{{ site.baseurl }}/images/authors/photo.jpg"
date:   2016-06-01
categories: DevOps
color: "blue"
#image: "{{ site.baseurl }}/images/azzimov1.jpg" #should be ~350px tall
excerpt: This article is aimed a sharing the learnings from a DevOps Hackfest with Azzimov.
---

## Learning from Hackfest with *Azzimov* ##

Azzimov teamed up with Microsoft during a few days to implement DevOps practices. The main focuse was put on increasing quality and reliability. We will describe in this report the steps we have taken and their results.

Among other things we talked about:
* Unit Testing
* Continuous Integration with Jenkins
* Continuous Deployment
* Integration Testing

The hacking team included:
* Yassine
* Yan
* Prasad
* Kevork
* William
* Julien

## Customer Profile ##
Azzimov is a startup based in Montr√©al, Canada which delivers a virtual shopping mall solution leveraging machine learning.

## Problem Statement ##

Azzimov was having quality issues when deploying new releases: Due to the lack of automated test, they had no way to ensure a certain quality of their product before pushing it in production.
This is a very usual situation in small to medium companies.
As a secondary objective, Azzimov also wanted to reduce the time to market of new features.

### Current Architecture ###

[Architecture overview picture]

Azzimov's architecutre is very granular with each component being isolated. This is a very good practice that makes changing any one of the components much easier (and that was great for our hackfest :) ).
It would also greatly simplify moving to a container based architecture, but that's for another day.

For the purpose of this hackfest, we decided to hack on their most complicated component: Trinity Gateway.
If we managed to do something meaningful there, then Azzimov's team was confident they could implement similar practices for their other components.

Trinity Gateway is a Java based service that acts as an orchestrator for all other services of the solution.
It is build with Maven 2.


## Solutions, Steps, and Delivery ##

The first day was dedicated to value stream mapping. This process allows to quickly capture waste and issues in the workflow from ideation to production.

[VSM Picture here]

This exercise allowed us to quickly understand the main issue: There is no real quality check in the process except some sparse manual testing. This allows defects to be passed downstream to production: releasing is thus very risky.

We also found that the mean lead time from the planning of a feature to it's release in production is around 5 weeks. This lead time was probably somewhat optimistic, but not too far from the truth.

ultimately, the goal of DevOps is to reduce this lead time as much as possible to allow rapid feedback and iteration, but in order to do that, we need a way to be confident in the quality of our product.

For these reasons we decided to focus on continuous integration and continous deployment of new changes into a staging environment first. Done properly, This would allow to catch issues much faster than today, and most importantly, to spot them before they impact a customer.
This are the basic building blocs of DevOps that can be built upon later on.

Because Azzimov's team already had some experience with Jenkins, we decided to go ahead and use it.
Because we love automation, and we don't want to setup anything manually, we deployed a new jenkins instance on Azure using an [ARM template](https://github.com/Azure/azure-quickstart-templates/tree/master/jenkins-on-ubuntu) that can be parametrized to setup any number of nodes.

Once Jenkins setup, we split the work between two teams: One team would work on continuous integration, the other would work on automating deployment on a staging environment.

### Continuous Integration

### Continuous Deployment to staging

### Functional testing
Since we went faster than expected, we then decided to push ahead with our objective of improving quality.
One of the issue, is that their existing code base as very few unit tests. As any developer will tell you, adding unit test to existing code, that was written by someone else is a very hard task. If the codebase is somewhat large this can be a huge time investment.

While it is probably always worth going back and adding unit test to critical pieces of the application, functional tests will offer a better return on investment on the short term. By testing the whole stack, we can quickly make sure everything is working as expected with minimal efforts.

During the value stream mapping we identified that the team did some manual sanity checks using curl before going into production.
We decided to create a new repository containing functional tests for all the different services, and capture the manual tests as a first step.

* Why we used nodejs?
* code excerpt
* Integration into jenkins
* Jenkinsfile relevant part.

## Conclusion ##

Time or cost savings metrics resulting from the implementation of the solution

Changes in the company culture or their organization



## General lessons ##
Bulleted list of insights the Hackfest team came away with

What can be applied or reused in other environments or other customers ?

## Resources ##
Links to additional resource (documentation, blog posts, github repos, ...)
